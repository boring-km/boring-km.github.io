---
title: 2021년 12월 27일
category: daily
order: 9
---

- 휴가 중 근무
- flutter 코드 리팩토링

### 휴가 중 근무
- 자꾸 휴가 중에 일 관련 메일이나 메신저가 날라온다.
- 회사에서는 네이버웍스를 메신저 겸 메일로 사용하고 있는데 편리할 때도 있지만, 너무 편리해서 일상에 지장을 받는 것 같기도 하다.
- 아무튼 전에 개발 가이드를 나눠준 자료만 봐도 잘 될텐데 안된다고 자꾸 뭐가 날라오길래 내일 다시 확인하기로 했다...
- 그리고 오늘 뭐 운영에서만 값이 잘못 나오는 게 있어서 잘 봤더니 서버에서 전달해오는 '\n'값이 앱에서 볼때는 똑같이 보이는데 뭔가 인코딩이 다른 형식인건지 xml로 화면에 그려지는 안드로이드에서
    '\n'이 그대로 나오는 것이었다.
  - 검증이랑 운영 DB의 특수문자 기호를 동일하게 맞춰보면서 해결은 금방 끝났는데 이와 같은 특이 케이스는 처음 본 것 같다.

### flutter 코드 리팩토링
- 회사 앱을 flutter로 개발하면서 구조적으로 어떻게 하면 개선할까 많이 생각을 하는 중이다.
- [얘](https://pub.dev/packages/get)를 이용해서 네트워크 통신이나 의존성 주입 같은 걸 해보는 중인데, 생가보다 편한 것도 있고 조금 아쉬운 부분도 있다.
- 테스트 코드를 간결하게 쓰고도 싶고 앱이 장치에서 실행되어야만 생성되는 값이 있기도 해서 이 중간점을 찾으며 **깔끔한 코드**를 만드려는 노력이 값지기도 했지만 삽질하는 시간도 좀 많았던 것 같다.

> 실제 앱 런타임에서는 공통으로 쓰일 헤더를 처음에 생성 해놓고 그 헤더를 계속 사용한다.
> 테스트 코드에서는 API를 호출하는 method를 바로 테스트하기 위해서 header를 입력값으로 넣어야 한다. (역시 공통이기 때문에 method 하나로 해결)

- 정리해보면 단순하지만 테스트 코드를 염두에 두면서도 코드가 단순하게 보여지기 위한 노력들이 숨어있었다.
  - GetConnect를 상속하는 BaseConnect라는 이름의 공통 헤더를 설정하는 부모 클래스라던가...
  - SRP 규칙에 맞춰 하나의 method가 하나의 역할에 충실하도록 하기 위한 노력들이 있었다.